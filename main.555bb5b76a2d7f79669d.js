!function(){"use strict";var e={91:function(e){e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},312:function(e,t,n){e.exports=n.p+"assets/favicon.png"},22:function(e,t,n){e.exports=n.p+"assets/favicon.svg"}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var l=t[i]={exports:{}};return e[i](l,l.exports,n),l.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var o=i.length-1;o>-1&&!e;)e=i[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),n.b=document.baseURI||self.location.href,function(){var e=n(91),t=n.n(e),i=new URL(n(22),n.b),o=new URL(n(312),n.b);t()(i),t()(o);class l{constructor(e,t="$back-btn--default"){this.name=e,this.color=t,this.name=e,this.color=t}}const s=function(e,t,n){const i=document.createElement(e);return t&&(i.className=t),n&&(i.textContent=n.toUpperCase()),i},r={elements:{body:document.querySelector("body"),header:null,button:null},initHeader(){var e;this.elements.header=s("header","header"),null===(e=this.elements.body)||void 0===e||e.appendChild(this.elements.header);const t=new l("garage","tomato"),n=new l("winners","lightgreen");this.elements.button=s("button","button button-garage",t.name),this.elements.button.style.backgroundColor=t.color,this.elements.header.appendChild(this.elements.button),this.elements.button=s("button","button button-winners",n.name),this.elements.header.appendChild(this.elements.button),this.elements.button.style.backgroundColor=n.color}};var a=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{a(i.next(e))}catch(e){l(e)}}function r(e){try{a(i.throw(e))}catch(e){l(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};const c="http://localhost:3000/garage/",u=(e,t)=>a(void 0,void 0,void 0,(function*(){return yield fetch(t).then((e=>e.ok?e.json():e.json().then((e=>{const t=new Error("Что-то пошло не так");throw e.data=e,t}))))})),d=(e,t,n=null)=>a(void 0,void 0,void 0,(function*(){return yield fetch(t,{method:e,body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))})),h=e=>a(void 0,void 0,void 0,(function*(){yield d("DELETE",c+`${e}`,{}).then((()=>console.log(`delete car id:${e}`)))}));const m={elements:{body:document.querySelector("body"),main:null,button:null,h1:null,div:null,p:null},initMain(){var e;this.elements.main=s("main","main"),null===(e=this.elements.body)||void 0===e||e.appendChild(this.elements.main)},initGarage(e){var t,n,i,o,l,r,a,d;return l=this,r=void 0,d=function*(){let l=0;yield u(0,c).then((e=>(l=e.length,l))),this.elements.h1=s("h1","garage-title"),this.elements.h1.textContent="My Garage",null===(t=this.elements.main)||void 0===t||t.appendChild(this.elements.h1),this.elements.div=s("div","garage-counter-container"),null===(n=this.elements.main)||void 0===n||n.appendChild(this.elements.div),this.elements.p=s("p","page-number"),this.elements.p.textContent=`Page number ${e}`,null===(i=this.elements.div)||void 0===i||i.appendChild(this.elements.p),this.elements.p=s("p","database-counter"),this.elements.p.textContent=`All cars ${l}`,null===(o=this.elements.div)||void 0===o||o.appendChild(this.elements.p)},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{o(d.next(e))}catch(e){t(e)}}function i(e){try{o(d.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof a?o:new a((function(e){e(o)}))).then(n,i)}o((d=d.apply(l,r||[])).next())}))},initWinners(){var e,t,n,i;this.elements.h1=s("h1","garage-title"),this.elements.h1.textContent="Winners",null===(e=this.elements.main)||void 0===e||e.appendChild(this.elements.h1),this.elements.div=s("div","garage-counter-container"),null===(t=this.elements.main)||void 0===t||t.appendChild(this.elements.div),this.elements.p=s("p","page-number"),this.elements.p.textContent="Page number 1",null===(n=this.elements.div)||void 0===n||n.appendChild(this.elements.p),this.elements.p=s("p","database-counter"),this.elements.p.textContent="All winners (1)",null===(i=this.elements.div)||void 0===i||i.appendChild(this.elements.p)},clear(){this.elements.main&&(this.elements.main.innerHTML="")}},p={elements:{main:null,container:null,div:null,button:null,inputCreate:null,inputUpdate:null},initEditor(){try{this.elements.main=document.querySelector("main")}catch(e){console.error("not found html-element main")}},createEditorButton(e){const t=new l(e);this.elements.container=s("div","container"),this.elements.main?this.elements.main.appendChild(this.elements.container):console.error("Not find <main></main>"),this.elements.inputCreate=s("input",`${e}-input`),this.elements.inputCreate.placeholder="name and model",this.elements.container.appendChild(this.elements.inputCreate),this.elements.inputUpdate=s("input",`${e}-color`),this.elements.inputUpdate.type="color",this.elements.container.appendChild(this.elements.inputUpdate),this.elements.button=s("button",`button editor-button ${e}-button`,t.name),this.elements.container.appendChild(this.elements.button)}},v={elements:{main:null,container:null,div:null,button:null,input:null},init(){this.elements.main=document.querySelector("main"),this.elements.container=s("div","container"),this.elements.main?this.elements.main.appendChild(this.elements.container):console.error("Not find <main></main>")},createButtons(){const e=new l("start","yellow"),t=new l("reset","red"),n=new l("generate"),i=new l("don`t touch","white"),o=(e,t)=>{var n;this.elements.button=s("button",`button editor-button ${t}`,e.name),this.elements.button.style.backgroundColor=e.color,null===(n=this.elements.container)||void 0===n||n.appendChild(this.elements.button)};o(e,"start-button"),o(t,"reset-button"),o(n,"generate-button"),o(i,"dont-touch")}},f={elements:{main:null,container:null,div:null,button:null,p:null,road:null,flag:null,pole:null,checkered:null,car:null},init(e,t){var n;this.elements.main=document.querySelector("main"),this.elements.container=s("div","container car-box"),this.elements.container.setAttribute("id",`${t}`),this.elements.main?this.elements.main.appendChild(this.elements.container):console.error("Not find <main></main>");const i=new l("select"),o=new l("remove"),r=new l("start","lightgreen"),a=new l("stop","lightyellow"),c=(e,t)=>{var n;this.elements.button=s("button",`button editor-button ${t}`,e.name),this.elements.button.style.backgroundColor=e.color,null===(n=this.elements.container)||void 0===n||n.appendChild(this.elements.button)};c(i,"select-button"),c(o,"remove-button"),c(r,"one-start-button"),c(a,"one-stop-button"),this.elements.p=s("p","car-name"),this.elements.p.textContent=e,null===(n=this.elements.container)||void 0===n||n.appendChild(this.elements.p)},road(e){var t,n,i,o,l,r,a,c,u,d,h;this.elements.road=s("div","car-road"),null===(t=this.elements.container)||void 0===t||t.appendChild(this.elements.road),this.elements.flag=s("div","flag"),null===(n=this.elements.road)||void 0===n||n.appendChild(this.elements.flag),this.elements.pole=s("div","pole"),null===(i=this.elements.flag)||void 0===i||i.appendChild(this.elements.pole),this.elements.checkered=s("div","checkered"),null===(o=this.elements.flag)||void 0===o||o.appendChild(this.elements.checkered),this.elements.car=s("div","car"),null===(l=this.elements.road)||void 0===l||l.appendChild(this.elements.car),this.elements.div=s("div","car-body"),this.elements.div.style.backgroundColor=e,null===(r=this.elements.car)||void 0===r||r.appendChild(this.elements.div),this.elements.div=s("div","car-window"),null===(a=this.elements.car)||void 0===a||a.appendChild(this.elements.div),this.elements.div=s("div","car-wheel car-front"),null===(c=this.elements.car)||void 0===c||c.appendChild(this.elements.div),this.elements.div=s("div","car-wheel car-rear"),null===(u=this.elements.car)||void 0===u||u.appendChild(this.elements.div),this.elements.div=s("div","car-headlight car-left"),null===(d=this.elements.car)||void 0===d||d.appendChild(this.elements.div),this.elements.div=s("div","car-headlight car-right"),null===(h=this.elements.car)||void 0===h||h.appendChild(this.elements.div)}};let g={};if(document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".button-garage"),t=document.querySelector(".button-winners");e?e.addEventListener("click",(e=>{e.preventDefault(),m.clear(),g={page:0},localStorage.setItem("currentPage",JSON.stringify(g)),q()})):console.error("not find garage button"),t?t.addEventListener("click",(e=>{e.preventDefault(),m.clear(),g={page:1},localStorage.setItem("currentPage",JSON.stringify(g)),m.initWinners()})):console.error("not find winners button")})),null===localStorage.getItem("currentPage")){const e={page:0};localStorage.setItem("currentPage",JSON.stringify(e))}const b=localStorage.getItem("currentPage"),y=b?JSON.parse(b):null;let w=[];fetch("http://localhost:3000/garage/").then((e=>e.json())).then((e=>{w=e,null===localStorage.getItem("carsAll")&&localStorage.setItem("carsAll",JSON.stringify(w))})).catch((e=>console.log(e+" localhost:3000/garage/ not found")));var C=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{a(i.next(e))}catch(e){l(e)}}function r(e){try{a(i.throw(e))}catch(e){l(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};const S="http://localhost:3000/garage/";var x=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{a(i.next(e))}catch(e){l(e)}}function r(e){try{a(i.throw(e))}catch(e){l(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))},L=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{a(i.next(e))}catch(e){l(e)}}function r(e){try{a(i.throw(e))}catch(e){l(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))},E=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{a(i.next(e))}catch(e){l(e)}}function r(e){try{a(i.throw(e))}catch(e){l(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};const k=[],P=1;function q(){return E(this,void 0,void 0,(function*(){var e;yield m.initGarage(P),p.initEditor(),yield p.createEditorButton("create"),p.createEditorButton("update"),v.init(),v.createButtons(),yield(e=P,void u(0,`http://localhost:3000/garage/?_page=${e}&_limit=7`).then((e=>{e.forEach((e=>{f.init(e.name,e.id.toString()),f.road(e.color)}))}))),function(){C(this,void 0,void 0,(function*(){const e=document.querySelector(".create-button"),t=document.querySelector(".create-input"),n=document.querySelector(".create-color");e.addEventListener("click",(e=>C(this,void 0,void 0,(function*(){e.preventDefault(),m.clear(),""===t.value&&(t.value="NoName car");const i={name:t.value,color:n.value};yield d("POST",S,i).then((e=>console.log(e))).catch((e=>console.log(e))),q(),t.value=""}))))}))}(),function(){const e=document.querySelector(".generate-button"),t=document.querySelector(".create-input"),n=document.querySelector(".create-color");e.addEventListener("click",(e=>C(this,void 0,void 0,(function*(){e.preventDefault();let i=0;for(;i<100;){const e={name:t.value,color:n.value};d("POST",S,e).then((e=>console.log(e))).catch((e=>console.log(e))),i++}setTimeout((()=>{m.clear(),q()}),100)}))))}(),function(){x(this,void 0,void 0,(function*(){document.querySelector(".dont-touch").addEventListener("click",(e=>x(this,void 0,void 0,(function*(){e.preventDefault(),yield a(void 0,void 0,void 0,(function*(){yield u(0,c).then((e=>{e.forEach((e=>h(e.id)))}))})),setTimeout((()=>{m.clear(),q()}),100)}))))}))}(),function(){document.addEventListener("click",(e=>x(this,void 0,void 0,(function*(){const t=e.target,n=t.parentNode;t.classList.contains("remove-button")&&(yield h(Number(n.getAttribute("id"))),location.reload())}))))}(),function(){document.addEventListener("click",(e=>L(this,void 0,void 0,(function*(){const t=e.target,n=t.parentNode.querySelector(".car"),i=null==n?void 0:n.querySelector(".car-left"),o=null==n?void 0:n.querySelector(".car-right");t.classList.contains("one-start-button")&&(n.classList.add("car-start"),i.classList.add("car-left-light"),o.classList.add("car-right-light")),t.classList.contains("one-stop-button")&&(n.classList.contains("car-start")&&n.classList.remove("car-start"),i.classList.contains("car-left-light")&&i.classList.remove("car-left-light"),o.classList.contains("car-right-light")&&o.classList.remove("car-right-light"))}))))}()}))}k.push(q),k.push((()=>{m.initWinners()})),function(){E(this,void 0,void 0,(function*(){r.initHeader(),m.initMain(),k[y.page]()}))}()}()}();