!function(){"use strict";var e={91:function(e){e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},312:function(e,t,n){e.exports=n.p+"assets/favicon.png"},22:function(e,t,n){e.exports=n.p+"assets/favicon.svg"}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var l=t[i]={exports:{}};return e[i](l,l.exports,n),l.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var o=i.length-1;o>-1&&!e;)e=i[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),n.b=document.baseURI||self.location.href,function(){var e=n(91),t=n.n(e),i=new URL(n(22),n.b),o=new URL(n(312),n.b);t()(i),t()(o);class l{constructor(e,t="$back-btn--default"){this.name=e,this.color=t,this.name=e,this.color=t}}const s=function(e,t,n){const i=document.createElement(e);return t&&(i.className=t),n&&(i.textContent=n.toUpperCase()),i},a={elements:{body:document.querySelector("body"),header:null,button:null},initHeader(){var e;this.elements.header=s("header","header"),null===(e=this.elements.body)||void 0===e||e.appendChild(this.elements.header);const t=new l("garage","tomato"),n=new l("winners","lightgreen");this.elements.button=s("button","button button-garage",t.name),this.elements.button.style.backgroundColor=t.color,this.elements.header.appendChild(this.elements.button),this.elements.button=s("button","button button-winners",n.name),this.elements.header.appendChild(this.elements.button),this.elements.button.style.backgroundColor=n.color}};var r=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{r(i.next(e))}catch(e){l(e)}}function a(e){try{r(i.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}r((i=i.apply(e,t||[])).next())}))};const c="http://localhost:3000/garage/",d="http://localhost:3000/winners/",u=(e,t)=>r(void 0,void 0,void 0,(function*(){return yield fetch(t).then((e=>e.ok?e.json():e.json().then((e=>{const t=new Error("Что-то пошло не так");throw e.data=e,t}))))})),h=(e,t,n=null)=>r(void 0,void 0,void 0,(function*(){return yield fetch(t,{method:e,body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))})),m=(e,t)=>r(void 0,void 0,void 0,(function*(){yield h("DELETE",t+`${e}`,{}).then((()=>console.log(`delete car id:${e}`)))})),v=e=>r(void 0,void 0,void 0,(function*(){yield u(0,e).then((t=>{t.forEach((t=>m(t.id,e)))}))}));var p=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{r(i.next(e))}catch(e){l(e)}}function a(e){try{r(i.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}r((i=i.apply(e,t||[])).next())}))};const f={elements:{body:document.querySelector("body"),main:null,button:null,buttonPrev:null,buttonNext:null,h1:null,div:null,p:null},initMain(){var e;this.elements.main=s("main","main"),null===(e=this.elements.body)||void 0===e||e.appendChild(this.elements.main)},initGarage(e){var t,n,i,o,l,a;return p(this,void 0,void 0,(function*(){let r=0;yield u(0,c).then((e=>r=e.length)),this.elements.h1=s("h1","garage-title"),this.elements.h1.textContent="My Garage",null===(t=this.elements.main)||void 0===t||t.appendChild(this.elements.h1),this.elements.div=s("div","garage-counter-container"),null===(n=this.elements.main)||void 0===n||n.appendChild(this.elements.div),this.elements.buttonPrev=s("button","button button-prev"),this.elements.buttonPrev.textContent="<",null===(i=this.elements.div)||void 0===i||i.appendChild(this.elements.buttonPrev),this.elements.p=s("p","page-number"),this.elements.p.textContent=`Page number ${e}`,null===(o=this.elements.div)||void 0===o||o.appendChild(this.elements.p),this.elements.buttonNext=s("button","button button-next"),this.elements.buttonNext.textContent=">",null===(l=this.elements.div)||void 0===l||l.appendChild(this.elements.buttonNext),this.elements.p=s("p","database-counter"),this.elements.p.textContent=`All cars ${r}`,null===(a=this.elements.div)||void 0===a||a.appendChild(this.elements.p)}))},initWinners(){var e,t,n,i,o,l;return p(this,void 0,void 0,(function*(){let a=0;yield u(0,d).then((e=>a=e.length)),this.elements.h1=s("h1","garage-title"),this.elements.h1.textContent="Winners",null===(e=this.elements.main)||void 0===e||e.appendChild(this.elements.h1),this.elements.div=s("div","garage-counter-container"),null===(t=this.elements.main)||void 0===t||t.appendChild(this.elements.div),this.elements.buttonPrev=s("button","button button-prev"),this.elements.buttonPrev.textContent="<",null===(n=this.elements.div)||void 0===n||n.appendChild(this.elements.buttonPrev),this.elements.p=s("p","page-number"),this.elements.p.textContent="Page number 1",null===(i=this.elements.div)||void 0===i||i.appendChild(this.elements.p),this.elements.buttonNext=s("button","button button-next"),this.elements.buttonNext.textContent=">",null===(o=this.elements.div)||void 0===o||o.appendChild(this.elements.buttonNext),this.elements.p=s("p","database-counter"),this.elements.p.textContent=`All winners ${a}`,null===(l=this.elements.div)||void 0===l||l.appendChild(this.elements.p)}))},clear(){this.elements.main&&(this.elements.main.innerHTML="")}},g={elements:{main:null,container:null,div:null,button:null,inputCreate:null,inputUpdate:null},initEditor(){try{this.elements.main=document.querySelector("main")}catch(e){console.error("not found html-element main")}},createEditorButton(e){const t=new l(e);this.elements.container=s("div","container"),this.elements.main?this.elements.main.appendChild(this.elements.container):console.error("Not find <main></main>"),this.elements.inputCreate=s("input",`${e}-input`),this.elements.inputCreate.placeholder="name and model",this.elements.container.appendChild(this.elements.inputCreate),this.elements.inputUpdate=s("input",`${e}-color`),this.elements.inputUpdate.type="color",this.elements.container.appendChild(this.elements.inputUpdate),this.elements.button=s("button",`button editor-button ${e}-button`,t.name),this.elements.container.appendChild(this.elements.button)}},b={elements:{main:null,container:null,div:null,button:null,input:null},init(){this.elements.main=document.querySelector("main"),this.elements.container=s("div","container"),this.elements.main?this.elements.main.appendChild(this.elements.container):console.error("Not find <main></main>")},createButtons(){const e=new l("start","yellow"),t=new l("reset","red"),n=new l("generate"),i=new l("del all data","white"),o=(e,t)=>{var n;this.elements.button=s("button",`button editor-button ${t}`,e.name),this.elements.button.style.backgroundColor=e.color,null===(n=this.elements.container)||void 0===n||n.appendChild(this.elements.button)};o(e,"start-button"),o(t,"reset-button"),o(n,"generate-button"),o(i,"dont-touch")}},y={elements:{main:null,container:null,div:null,button:null,p:null,road:null,flag:null,pole:null,checkered:null,car:null},init(e,t){var n;this.elements.main=document.querySelector("main"),this.elements.container=s("div","container car-box"),this.elements.container.setAttribute("id",`${t}`),this.elements.main?this.elements.main.appendChild(this.elements.container):console.error("Not find <main></main>");const i=new l("select"),o=new l("remove"),a=new l("start","lightgreen"),r=new l("stop","lightyellow"),c=(e,t)=>{var n;this.elements.button=s("button",`button editor-button ${t}`,e.name),this.elements.button.style.backgroundColor=e.color,null===(n=this.elements.container)||void 0===n||n.appendChild(this.elements.button)};c(i,"select-button"),c(o,"remove-button"),c(a,"one-start-button"),c(r,"one-stop-button"),this.elements.p=s("p","car-name"),this.elements.p.textContent=`${e} #${t}`,null===(n=this.elements.container)||void 0===n||n.appendChild(this.elements.p)},road(e){var t,n,i,o,l,a,r,c,d,u,h;this.elements.road=s("div","car-road"),null===(t=this.elements.container)||void 0===t||t.appendChild(this.elements.road),this.elements.flag=s("div","flag"),null===(n=this.elements.road)||void 0===n||n.appendChild(this.elements.flag),this.elements.pole=s("div","pole"),null===(i=this.elements.flag)||void 0===i||i.appendChild(this.elements.pole),this.elements.checkered=s("div","checkered"),null===(o=this.elements.flag)||void 0===o||o.appendChild(this.elements.checkered),this.elements.car=s("div","car"),this.elements.car.setAttribute("data-color",e),null===(l=this.elements.road)||void 0===l||l.appendChild(this.elements.car),this.elements.div=s("div","car-body"),this.elements.div.style.backgroundColor=e,null===(a=this.elements.car)||void 0===a||a.appendChild(this.elements.div),this.elements.div=s("div","car-window"),null===(r=this.elements.car)||void 0===r||r.appendChild(this.elements.div),this.elements.div=s("div","car-wheel car-front"),this.elements.div.style.backgroundColor=e,this.elements.div.style.filter="hue-rotate(90deg) invert(70%)",null===(c=this.elements.car)||void 0===c||c.appendChild(this.elements.div),this.elements.div=s("div","car-wheel car-rear"),this.elements.div.style.backgroundColor=e,this.elements.div.style.filter="hue-rotate(90deg) invert(70%)",null===(d=this.elements.car)||void 0===d||d.appendChild(this.elements.div),this.elements.div=s("div","car-headlight car-left"),null===(u=this.elements.car)||void 0===u||u.appendChild(this.elements.div),this.elements.div=s("div","car-headlight car-right"),null===(h=this.elements.car)||void 0===h||h.appendChild(this.elements.div)}};let C={};if(document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".button-garage"),t=document.querySelector(".button-winners");e?e.addEventListener("click",(e=>{e.preventDefault(),f.clear(),C={page:0},localStorage.setItem("currentPage",JSON.stringify(C)),I()})):console.error("not find garage button"),t?t.addEventListener("click",(e=>{e.preventDefault(),f.clear(),C={page:1},localStorage.setItem("currentPage",JSON.stringify(C)),J()})):console.error("not find winners button")})),null===localStorage.getItem("currentPage")){const e={page:0};localStorage.setItem("currentPage",JSON.stringify(e))}const w=localStorage.getItem("currentPage"),S=w?JSON.parse(w):null;let x=[];fetch("http://localhost:3000/garage/").then((e=>e.json())).then((e=>{x=e,null===localStorage.getItem("carsAll")&&localStorage.setItem("carsAll",JSON.stringify(x))})).catch((e=>console.log(e+" localhost:3000/garage/ not found")));const E=["red","green","blue","yellow","orange","purple","pink","brown","black","white","gray","silver","gold","teal","cyan","magenta","navy","olive","maroon","lime","tomato","aquamarine","beige","coral","darkblue","firebrick","goldenrod","hotpink","indigo","khaki","lavender","moccasin","olivedrab","papayawhip","royalblue","seagreen","tomato","violet","wheat","yellowgreen"],L=["Audi","BMW","Chevrolet","Ford","Honda","Hyundai","Kia","Mercedes-Benz","Nissan","Toyota","Volkswagen","Volvo","Ferrari","Lamborghini","Porsche","Tesla","Maserati","Jaguar","Subaru","Mazda","Lexus","Acura","Jeep","Land Rover","Aston Martin","Bugatti","McLaren","Rolls-Royce","Bentley","Mini","Mitsubishi","Peugeot","Renault","Suzuki","Fiat","Chrysler","Dodge","Infiniti","Lincoln","Lotus","Buick","Cadillac","GMC","Alfa Romeo","Jaguar","Lancia","Pontiac","Saab","Saturn","Smart","Hummer","Maybach","Scion","Oldsmobile","Geo","Daewoo"],k=["A3","3 Series","Camaro","Mustang","Civic","Sonata","Sportage","C-Class","Altima","Corolla","Golf","XC60","488","Huracan","911","Model S","Ghibli","F-Type","Outback","CX-5","RX","TLX","Grand Cherokee","Range Rover","DB11","Chiron","720S","Phantom","Continental GT","Cooper","Outlander","308","Clio","Swift","500","300","Charger","Q50","Navigator","Elise","Enclave","Escalade","Sierra","Giulia","XE","Ypsilon","GTO","9-3","Aura","Fortwo","H2","S-Class"];var N=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{r(i.next(e))}catch(e){l(e)}}function a(e){try{r(i.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}r((i=i.apply(e,t||[])).next())}))};const P="http://localhost:3000/garage/",q=e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e};var $=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{r(i.next(e))}catch(e){l(e)}}function a(e){try{r(i.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}r((i=i.apply(e,t||[])).next())}))},A=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{r(i.next(e))}catch(e){l(e)}}function a(e){try{r(i.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}r((i=i.apply(e,t||[])).next())}))};const T="started",M="stopped";let O=60;const j=(e,t)=>A(void 0,void 0,void 0,(function*(){try{const n=yield fetch("http://localhost:3000/engine?id="+e+"&status="+t,{method:"PATCH"});if(200===n.status){const e=yield n.json(),t=e.velocity,i=e.distance;O=i/t}else if(400===n.status){const e=yield n.json();console.error("Error:",e)}else 404===n.status?console.error("Car not found."):500===n.status?console.error("Car engine is broken down."):console.error("Unexpected error:",n)}catch(e){console.error("Error:",e)}})),B=(e,t,n,i)=>{i?(e.classList.add("car-motor","car-start"),t.classList.add("car-left-light"),n.classList.add("car-right-light")):(e.classList.remove("car-start","car-motor"),t.classList.remove("car-left-light"),n.classList.remove("car-right-light"))};var D=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{r(i.next(e))}catch(e){l(e)}}function a(e){try{r(i.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}r((i=i.apply(e,t||[])).next())}))};const G={elements:{main:null,container:null,div:null,p:null},init(e,t,n,i,o){var l,a,r,c,d;this.elements.main=document.querySelector("main"),this.elements.container=s("div","container winner-box"),this.elements.main?this.elements.main.appendChild(this.elements.container):console.error("Not find <main></main>"),this.elements.p=s("p","winner-data"),this.elements.p.textContent=`${e}`,null===(l=this.elements.container)||void 0===l||l.appendChild(this.elements.p),this.elements.p=s("p","winner-data"),this.elements.p.textContent=`${t}`,this.elements.p.style.backgroundColor=`${t}`,null===(a=this.elements.container)||void 0===a||a.appendChild(this.elements.p),this.elements.p=s("p","winner-data"),this.elements.p.textContent=`${n}`,null===(r=this.elements.container)||void 0===r||r.appendChild(this.elements.p),this.elements.p=s("p","winner-data"),this.elements.p.textContent=`${i}`,null===(c=this.elements.container)||void 0===c||c.appendChild(this.elements.p),this.elements.p=s("p","winner-data"),this.elements.p.textContent=`${o}`,null===(d=this.elements.container)||void 0===d||d.appendChild(this.elements.p)}};var R=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{r(i.next(e))}catch(e){l(e)}}function a(e){try{r(i.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}r((i=i.apply(e,t||[])).next())}))};const H=[],I=()=>R(void 0,void 0,void 0,(function*(){yield f.initGarage(1),g.initEditor(),yield g.createEditorButton("create"),g.createEditorButton("update"),b.init(),b.createButtons(),yield(1,void u(0,"http://localhost:3000/garage/?_page=1&_limit=7").then((e=>{e.forEach((e=>{y.init(e.name,e.id.toString()),y.road(e.color)}))}))),function(){N(this,void 0,void 0,(function*(){const e=document.querySelector(".create-button"),t=document.querySelector(".create-input"),n=document.querySelector(".create-color");e.addEventListener("click",(e=>N(this,void 0,void 0,(function*(){e.preventDefault(),f.clear(),""===t.value&&(t.value="NoName car");const i={name:t.value,color:n.value};yield h("POST",P,i).then((e=>console.log(e))).catch((e=>console.log(e))),I(),t.value=""}))))}))}(),function(){document.querySelector(".generate-button").addEventListener("click",(e=>N(this,void 0,void 0,(function*(){e.preventDefault();let t=0;for(;t<100;){const e=q(E),n=q(L),i=q(k),o={name:`${n[0]} ${i[0]}`,color:e[0]};h("POST",P,o).then((e=>console.log(e))).catch((e=>console.log(e))),t++}setTimeout((()=>{f.clear(),I()}),100)}))))}(),function(){$(this,void 0,void 0,(function*(){document.querySelector(".dont-touch").addEventListener("click",(e=>$(this,void 0,void 0,(function*(){e.preventDefault(),yield v(c),yield v(d),setTimeout((()=>{f.clear(),I()}),100)}))))}))}(),function(){document.addEventListener("click",(e=>$(this,void 0,void 0,(function*(){const t=e.target,n=t.parentNode;t.classList.contains("remove-button")&&(yield m(Number(n.getAttribute("id")),c),yield m(Number(n.getAttribute("id")),d),location.reload())}))))}(),document.addEventListener("click",(e=>A(void 0,void 0,void 0,(function*(){const t=e.target,n=t.parentNode,i=n.querySelector(".car"),o=null==i?void 0:i.querySelector(".car-left"),l=null==i?void 0:i.querySelector(".car-right"),s=Number(n.getAttribute("id"));if(t.classList.contains("one-start-button")&&(t.disabled=!0,yield j(s,T),O=+(O/1e3).toFixed(2),i.style.transition=`all ${O}s ease-out`,B(i,o,l,!0)),t.classList.contains("one-stop-button")){t.previousElementSibling.disabled=!1,i.style.transition="all 0s ease-out",B(i,o,l,!1);const e=s;yield j(e,M)}})))),document.addEventListener("click",(e=>D(void 0,void 0,void 0,(function*(){var t;const n=e.target,i=n.parentNode,o=i.querySelector(".car-name"),l=document.querySelector(".update-input"),s=Number(i.getAttribute("id"));n.classList.contains("select-button")&&(l.setAttribute("id",s.toString()),l.value=`${null===(t=o.textContent)||void 0===t?void 0:t.slice(0,-3)}`)})))),function(){D(this,void 0,void 0,(function*(){const e=document.querySelector(".update-button"),t=document.querySelector(".update-input"),n=document.querySelector(".update-color");e.addEventListener("click",(e=>D(this,void 0,void 0,(function*(){const i=Number(t.getAttribute("id"));if(e.preventDefault(),""===t.value)console.log("Please, choose a car");else{f.clear();const e={name:t.value,color:n.value};yield h("PATCH","http://localhost:3000/garage/"+i,e).then((e=>console.log(e))).catch((e=>console.log(e))),I(),t.value=""}}))))}))}(),document.addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("reset-button")){const e=document.querySelectorAll(".car");t.previousElementSibling.disabled=!1,e.forEach((e=>{var t;e.style.transition="all 0s ease-out";const n=null===(t=e.parentElement)||void 0===t?void 0:t.parentElement,i=Number(null==n?void 0:n.getAttribute("id")),o=e.querySelector(".car-left"),l=e.querySelector(".car-right");B(e,o,l,!1),j(i,M)}))}})),document.addEventListener("click",(e=>A(void 0,void 0,void 0,(function*(){const t=e.target;let n=[];if(t.classList.contains("start-button")){t.disabled=!0;const e=document.querySelectorAll(".car");yield e.forEach((e=>A(void 0,void 0,void 0,(function*(){var t;e.classList.add("car-motor");const i=null===(t=e.parentElement)||void 0===t?void 0:t.parentElement,o=null==i?void 0:i.querySelector(".car-name"),l=(null==o?void 0:o.textContent)||"",s=Number(null==i?void 0:i.getAttribute("id")),a=e.getAttribute("data-color")||"";yield j(s,T),O=+(O/1e3).toFixed(2),n.push({time:O,name:l,color:a}),yield((e,t)=>{e.style.transition=`all ${t}s ease-out`})(e,O);const r=e.querySelector(".car-left"),c=e.querySelector(".car-right");B(e,r,c,!0)})))),setTimeout((()=>{const e=n.sort(((e,t)=>e.time-t.time))[0],t=e?e.time:10,i=e?e.name:"CarName",o=e?e.color:"grey";((e,t)=>{const n=document.querySelector("main"),i=s("div","modal-container"),o=s("p","modal-text");o.textContent=`Winner ${t}s ${e}`,i.classList.contains("visually-hidden")&&i.classList.remove("visually-hidden"),i.appendChild(o),n?n.appendChild(i):console.log("main is not found")})(i,t),((e,t,n)=>{A(void 0,void 0,void 0,(function*(){const i={name:e,time:t,color:n};yield h("POST",d,i).then((e=>console.log(e))).catch((e=>console.log(e)))}))})(i,t,o),setTimeout((()=>{const e=document.querySelector(".modal-container");n=[],null==e||e.remove()}),6e3)}),1500)}}))))})),J=()=>R(void 0,void 0,void 0,(function*(){yield f.initWinners(),G.init("Number","Car","Name","Wins","Best Time"),u(0,d+"?_page=1&_limit=10").then((e=>{e.forEach(((e,t)=>{const n=Object.prototype.hasOwnProperty.call(e,"color")?e.color:"darkgrey",i=Object.prototype.hasOwnProperty.call(e,"name")?e.name:"NoName";G.init((t+1).toString(),n,i,1..toString(),`${e.time} sec`)}))}))}));H.push(I),H.push(J),function(){R(this,void 0,void 0,(function*(){a.initHeader(),f.initMain(),yield H[S.page]()}))}()}()}();