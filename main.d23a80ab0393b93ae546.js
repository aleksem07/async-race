!function(){"use strict";var e={91:function(e){e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},312:function(e,t,n){e.exports=n.p+"assets/favicon.png"},22:function(e,t,n){e.exports=n.p+"assets/favicon.svg"}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var l=t[i]={exports:{}};return e[i](l,l.exports,n),l.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var o=i.length-1;o>-1&&!e;)e=i[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),n.b=document.baseURI||self.location.href,function(){var e=n(91),t=n.n(e),i=new URL(n(22),n.b),o=new URL(n(312),n.b);t()(i),t()(o);class l{constructor(e,t="$back-btn--default"){this.name=e,this.color=t,this.name=e,this.color=t}}const a=function(e,t,n){const i=document.createElement(e);return t&&(i.className=t),n&&(i.textContent=n.toUpperCase()),i},r={elements:{body:document.querySelector("body"),header:null,button:null},initHeader(){var e;this.elements.header=a("header","header"),null===(e=this.elements.body)||void 0===e||e.appendChild(this.elements.header);const t=new l("garage","tomato"),n=new l("winners","lightgreen");this.elements.button=a("button","button button-garage",t.name),this.elements.button.style.backgroundColor=t.color,this.elements.header.appendChild(this.elements.button),this.elements.button=a("button","button button-winners",n.name),this.elements.header.appendChild(this.elements.button),this.elements.button.style.backgroundColor=n.color}};var s=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function a(e){try{s(i.next(e))}catch(e){l(e)}}function r(e){try{s(i.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}s((i=i.apply(e,t||[])).next())}))};const c="http://localhost:3000/garage/",u=(e,t)=>s(void 0,void 0,void 0,(function*(){return yield fetch(t).then((e=>e.ok?e.json():e.json().then((e=>{const t=new Error("Что-то пошло не так");throw e.data=e,t}))))})),d=(e,t,n=null)=>s(void 0,void 0,void 0,(function*(){return yield fetch(t,{method:e,body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))})),h=e=>s(void 0,void 0,void 0,(function*(){yield d("DELETE",c+`${e}`,{}).then((()=>console.log(`delete car id:${e}`)))}));const m={elements:{body:document.querySelector("body"),main:null,button:null,h1:null,div:null,p:null},initMain(){var e;this.elements.main=a("main","main"),null===(e=this.elements.body)||void 0===e||e.appendChild(this.elements.main)},initGarage(e){var t,n,i,o,l,r,s,d;return l=this,r=void 0,d=function*(){let l=0;yield u(0,c).then((e=>(l=e.length,l))),this.elements.h1=a("h1","garage-title"),this.elements.h1.textContent="My Garage",null===(t=this.elements.main)||void 0===t||t.appendChild(this.elements.h1),this.elements.div=a("div","garage-counter-container"),null===(n=this.elements.main)||void 0===n||n.appendChild(this.elements.div),this.elements.p=a("p","page-number"),this.elements.p.textContent=`Page number ${e}`,null===(i=this.elements.div)||void 0===i||i.appendChild(this.elements.p),this.elements.p=a("p","database-counter"),this.elements.p.textContent=`All cars ${l}`,null===(o=this.elements.div)||void 0===o||o.appendChild(this.elements.p)},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{o(d.next(e))}catch(e){t(e)}}function i(e){try{o(d.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(n,i)}o((d=d.apply(l,r||[])).next())}))},initWinners(){var e,t,n,i;this.elements.h1=a("h1","garage-title"),this.elements.h1.textContent="Winners",null===(e=this.elements.main)||void 0===e||e.appendChild(this.elements.h1),this.elements.div=a("div","garage-counter-container"),null===(t=this.elements.main)||void 0===t||t.appendChild(this.elements.div),this.elements.p=a("p","page-number"),this.elements.p.textContent="Page number 1",null===(n=this.elements.div)||void 0===n||n.appendChild(this.elements.p),this.elements.p=a("p","database-counter"),this.elements.p.textContent="All winners (1)",null===(i=this.elements.div)||void 0===i||i.appendChild(this.elements.p)},clear(){this.elements.main&&(this.elements.main.innerHTML="")}},v={elements:{main:null,container:null,div:null,button:null,inputCreate:null,inputUpdate:null},initEditor(){try{this.elements.main=document.querySelector("main")}catch(e){console.error("not found html-element main")}},createEditorButton(e){const t=new l(e);this.elements.container=a("div","container"),this.elements.main?this.elements.main.appendChild(this.elements.container):console.error("Not find <main></main>"),this.elements.inputCreate=a("input",`${e}-input`),this.elements.inputCreate.placeholder="name and model",this.elements.container.appendChild(this.elements.inputCreate),this.elements.inputUpdate=a("input",`${e}-color`),this.elements.inputUpdate.type="color",this.elements.container.appendChild(this.elements.inputUpdate),this.elements.button=a("button",`button editor-button ${e}-button`,t.name),this.elements.container.appendChild(this.elements.button)}},p={elements:{main:null,container:null,div:null,button:null,input:null},init(){this.elements.main=document.querySelector("main"),this.elements.container=a("div","container"),this.elements.main?this.elements.main.appendChild(this.elements.container):console.error("Not find <main></main>")},createButtons(){const e=new l("start","yellow"),t=new l("reset","red"),n=new l("generate"),i=new l("don`t touch","white"),o=(e,t)=>{var n;this.elements.button=a("button",`button editor-button ${t}`,e.name),this.elements.button.style.backgroundColor=e.color,null===(n=this.elements.container)||void 0===n||n.appendChild(this.elements.button)};o(e,"start-button"),o(t,"reset-button"),o(n,"generate-button"),o(i,"dont-touch")}},f={elements:{main:null,container:null,div:null,button:null,p:null,road:null,flag:null,pole:null,checkered:null,car:null},init(e,t){var n;this.elements.main=document.querySelector("main"),this.elements.container=a("div","container car-box"),this.elements.container.setAttribute("id",`${t}`),this.elements.main?this.elements.main.appendChild(this.elements.container):console.error("Not find <main></main>");const i=new l("select"),o=new l("remove"),r=new l("start","lightgreen"),s=new l("stop","lightyellow"),c=(e,t)=>{var n;this.elements.button=a("button",`button editor-button ${t}`,e.name),this.elements.button.style.backgroundColor=e.color,null===(n=this.elements.container)||void 0===n||n.appendChild(this.elements.button)};c(i,"select-button"),c(o,"remove-button"),c(r,"one-start-button"),c(s,"one-stop-button"),this.elements.p=a("p","car-name"),this.elements.p.textContent=`${e} #${t}`,null===(n=this.elements.container)||void 0===n||n.appendChild(this.elements.p)},road(e){var t,n,i,o,l,r,s,c,u,d,h;this.elements.road=a("div","car-road"),null===(t=this.elements.container)||void 0===t||t.appendChild(this.elements.road),this.elements.flag=a("div","flag"),null===(n=this.elements.road)||void 0===n||n.appendChild(this.elements.flag),this.elements.pole=a("div","pole"),null===(i=this.elements.flag)||void 0===i||i.appendChild(this.elements.pole),this.elements.checkered=a("div","checkered"),null===(o=this.elements.flag)||void 0===o||o.appendChild(this.elements.checkered),this.elements.car=a("div","car"),null===(l=this.elements.road)||void 0===l||l.appendChild(this.elements.car),this.elements.div=a("div","car-body"),this.elements.div.style.backgroundColor=e,null===(r=this.elements.car)||void 0===r||r.appendChild(this.elements.div),this.elements.div=a("div","car-window"),null===(s=this.elements.car)||void 0===s||s.appendChild(this.elements.div),this.elements.div=a("div","car-wheel car-front"),this.elements.div.style.backgroundColor=e,this.elements.div.style.filter="hue-rotate(90deg) invert(70%)",null===(c=this.elements.car)||void 0===c||c.appendChild(this.elements.div),this.elements.div=a("div","car-wheel car-rear"),this.elements.div.style.backgroundColor=e,this.elements.div.style.filter="hue-rotate(90deg) invert(70%)",null===(u=this.elements.car)||void 0===u||u.appendChild(this.elements.div),this.elements.div=a("div","car-headlight car-left"),null===(d=this.elements.car)||void 0===d||d.appendChild(this.elements.div),this.elements.div=a("div","car-headlight car-right"),null===(h=this.elements.car)||void 0===h||h.appendChild(this.elements.div)}};let g={};if(document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".button-garage"),t=document.querySelector(".button-winners");e?e.addEventListener("click",(e=>{e.preventDefault(),m.clear(),g={page:0},localStorage.setItem("currentPage",JSON.stringify(g)),R()})):console.error("not find garage button"),t?t.addEventListener("click",(e=>{e.preventDefault(),m.clear(),g={page:1},localStorage.setItem("currentPage",JSON.stringify(g)),m.initWinners()})):console.error("not find winners button")})),null===localStorage.getItem("currentPage")){const e={page:0};localStorage.setItem("currentPage",JSON.stringify(e))}const b=localStorage.getItem("currentPage"),y=b?JSON.parse(b):null;let C=[];fetch("http://localhost:3000/garage/").then((e=>e.json())).then((e=>{C=e,null===localStorage.getItem("carsAll")&&localStorage.setItem("carsAll",JSON.stringify(C))})).catch((e=>console.log(e+" localhost:3000/garage/ not found")));const w=["red","green","blue","yellow","orange","purple","pink","brown","black","white","gray","silver","gold","teal","cyan","magenta","navy","olive","maroon","lime","tomato","aquamarine","beige","coral","darkblue","firebrick","goldenrod","hotpink","indigo","khaki","lavender","moccasin","olivedrab","papayawhip","royalblue","seagreen","tomato","violet","wheat","yellowgreen"],S=["Audi","BMW","Chevrolet","Ford","Honda","Hyundai","Kia","Mercedes-Benz","Nissan","Toyota","Volkswagen","Volvo","Ferrari","Lamborghini","Porsche","Tesla","Maserati","Jaguar","Subaru","Mazda","Lexus","Acura","Jeep","Land Rover","Aston Martin","Bugatti","McLaren","Rolls-Royce","Bentley","Mini","Mitsubishi","Peugeot","Renault","Suzuki","Fiat","Chrysler","Dodge","Infiniti","Lincoln","Lotus","Buick","Cadillac","GMC","Alfa Romeo","Jaguar","Lancia","Pontiac","Saab","Saturn","Smart","Hummer","Maybach","Scion","Oldsmobile","Geo","Daewoo"],L=["A3","3 Series","Camaro","Mustang","Civic","Sonata","Sportage","C-Class","Altima","Corolla","Golf","XC60","488","Huracan","911","Model S","Ghibli","F-Type","Outback","CX-5","RX","TLX","Grand Cherokee","Range Rover","DB11","Chiron","720S","Phantom","Continental GT","Cooper","Outlander","308","Clio","Swift","500","300","Charger","Q50","Navigator","Elise","Enclave","Escalade","Sierra","Giulia","XE","Ypsilon","GTO","9-3","Aura","Fortwo","H2","S-Class"];var k=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function a(e){try{s(i.next(e))}catch(e){l(e)}}function r(e){try{s(i.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}s((i=i.apply(e,t||[])).next())}))};const x="http://localhost:3000/garage/",E=e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e};var P=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function a(e){try{s(i.next(e))}catch(e){l(e)}}function r(e){try{s(i.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}s((i=i.apply(e,t||[])).next())}))},N=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function a(e){try{s(i.next(e))}catch(e){l(e)}}function r(e){try{s(i.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}s((i=i.apply(e,t||[])).next())}))};let q=60;const M=(e,t)=>N(void 0,void 0,void 0,(function*(){try{const n=yield fetch("http://localhost:3000/engine?id="+e+"&status="+t,{method:"PATCH"});if(200===n.status){const e=yield n.json(),t=e.velocity,i=e.distance;q=i/t}else if(400===n.status){const e=yield n.json();console.error("Error:",e)}else 404===n.status?console.error("Car not found."):500===n.status?console.error("Car engine is broken down."):console.error("Unexpected error:",n)}catch(e){console.error("Error:",e)}})),$=(e,t)=>{e.disabled=!0,setTimeout((()=>{e.disabled=!1}),t)},A=()=>{document.addEventListener("click",(e=>N(void 0,void 0,void 0,(function*(){const t=e.target,n=t.parentNode,i=n.querySelector(".car"),o=null==i?void 0:i.querySelector(".car-left"),l=null==i?void 0:i.querySelector(".car-right"),a=Number(n.getAttribute("id"));if(t.classList.contains("one-start-button")){i.classList.add("car-motor"),o.classList.add("car-left-light"),l.classList.add("car-right-light"),$(t,5e3);const e=a;yield M(e,"started"),q=+(q/1e3).toFixed(2),i.style.transition=`all ${q}s ease-out`,i.classList.add("car-start")}t.classList.contains("one-stop-button")&&($(t,5e3),i.style.transition="all 1s ease-out",i.classList.contains("car-start")&&i.classList.contains("car-motor")&&o.classList.contains("car-left-light")&&l.classList.contains("car-right-light")&&(i.classList.remove("car-start"),i.classList.remove("car-motor"),o.classList.remove("car-left-light"),l.classList.remove("car-right-light")),M(a,"stopped"))}))))};var T=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function a(e){try{s(i.next(e))}catch(e){l(e)}}function r(e){try{s(i.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}s((i=i.apply(e,t||[])).next())}))};const O=()=>{document.addEventListener("click",(e=>T(void 0,void 0,void 0,(function*(){var t;const n=e.target,i=n.parentNode,o=i.querySelector(".car-name"),l=document.querySelector(".update-input"),a=Number(i.getAttribute("id"));n.classList.contains("select-button")&&(l.setAttribute("id",a.toString()),l.value=`${null===(t=o.textContent)||void 0===t?void 0:t.slice(0,-3)}`)}))))},B="http://localhost:3000/garage/";var j=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function a(e){try{s(i.next(e))}catch(e){l(e)}}function r(e){try{s(i.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}s((i=i.apply(e,t||[])).next())}))};const D=[],G=1;function R(){return j(this,void 0,void 0,(function*(){var e;yield m.initGarage(G),v.initEditor(),yield v.createEditorButton("create"),v.createEditorButton("update"),p.init(),p.createButtons(),yield(e=G,void u(0,`http://localhost:3000/garage/?_page=${e}&_limit=7`).then((e=>{e.forEach((e=>{f.init(e.name,e.id.toString()),f.road(e.color)}))}))),function(){k(this,void 0,void 0,(function*(){const e=document.querySelector(".create-button"),t=document.querySelector(".create-input"),n=document.querySelector(".create-color");e.addEventListener("click",(e=>k(this,void 0,void 0,(function*(){e.preventDefault(),m.clear(),""===t.value&&(t.value="NoName car");const i={name:t.value,color:n.value};yield d("POST",x,i).then((e=>console.log(e))).catch((e=>console.log(e))),R(),t.value=""}))))}))}(),function(){document.querySelector(".generate-button").addEventListener("click",(e=>k(this,void 0,void 0,(function*(){e.preventDefault();let t=0;for(;t<100;){const e=E(w),n=E(S),i=E(L),o={name:`${n[0]} ${i[0]}`,color:e[0]};d("POST",x,o).then((e=>console.log(e))).catch((e=>console.log(e))),t++}setTimeout((()=>{m.clear(),R()}),100)}))))}(),function(){P(this,void 0,void 0,(function*(){document.querySelector(".dont-touch").addEventListener("click",(e=>P(this,void 0,void 0,(function*(){e.preventDefault(),yield s(void 0,void 0,void 0,(function*(){yield u(0,c).then((e=>{e.forEach((e=>h(e.id)))}))})),setTimeout((()=>{m.clear(),R()}),100)}))))}))}(),function(){document.addEventListener("click",(e=>P(this,void 0,void 0,(function*(){const t=e.target,n=t.parentNode;t.classList.contains("remove-button")&&(yield h(Number(n.getAttribute("id"))),location.reload())}))))}(),A(),O(),function(){T(this,void 0,void 0,(function*(){const e=document.querySelector(".update-button"),t=document.querySelector(".update-input"),n=document.querySelector(".update-color");e.addEventListener("click",(e=>T(this,void 0,void 0,(function*(){const i=Number(t.getAttribute("id"));if(e.preventDefault(),""===t.value)console.log("Please, choose a car");else{m.clear();const e={name:t.value,color:n.value};yield d("PATCH",B+i,e).then((e=>console.log(e))).catch((e=>console.log(e))),R(),t.value=""}}))))}))}()}))}D.push(R),D.push((()=>{m.initWinners()})),function(){j(this,void 0,void 0,(function*(){r.initHeader(),m.initMain(),D[y.page]()}))}()}()}();